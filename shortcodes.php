<?php

$links = get_option( 'dfr_rrss_links' );

function dfr_rrss_do_icons( $atts ) {

    // DEV Add ID if want more than one list

    $shortcode_atts = shortcode_atts( array(
        'id' => 'list-main'
    ), $atts );

    global $links;

    if( isset( $links['facebook'] ) && $links['facebook'] !== null ) {
        $facebook_icon = array(
            'link' => $links['facebook'],
            'icon' => '<svg xmlns="http://www.w3.org/2000/svg" width="10.798" height="20.849" viewBox="0 0 10.798 20.849"><path id="social_facebook_o_n" d="M12.929,11.38h3.179l.5-3.857H12.929V4.83a1.355,1.355,0,0,1,1.32-1.355h2.389V0H13.3A4.274,4.274,0,0,0,9.028,4.274V7.523H5.84V11.38H9.028v9.469h3.9Z" transform="translate(-5.84)"/></svg>'
        );
    } else {
        $facebook_icon = array(
            'link' => null
        );   
    }
    
    if( isset( $links['instagram'] ) && $links['instagram'] !== null ) {
        $instagram_icon = array(
            'link' => $links['instagram'],
            'icon' => '<svg xmlns="http://www.w3.org/2000/svg" width="20.849" height="20.849" viewBox="0 0 20.849 20.849"><path d="M15.158,0H6.731A6.211,6.211,0,0,0,.52,6.211v8.427a6.211,6.211,0,0,0,6.211,6.211h8.427a6.22,6.22,0,0,0,6.211-6.211V6.211A6.22,6.22,0,0,0,15.158,0Zm4.109,14.638a4.118,4.118,0,0,1-4.109,4.118H6.731a4.118,4.118,0,0,1-4.118-4.118V6.211A4.118,4.118,0,0,1,6.731,2.094h8.427a4.118,4.118,0,0,1,4.109,4.118Z" transform="translate(-0.52)"/><path d="M11.7,5.79a5.395,5.395,0,1,0,5.386,5.395A5.395,5.395,0,0,0,11.7,5.79Zm0,8.687A3.292,3.292,0,1,1,15,11.185,3.292,3.292,0,0,1,11.7,14.477Z" transform="translate(-1.279 -0.76)" /><circle cx="1.294" cy="1.294" r="1.294" transform="translate(14.534 3.779)" /></svg>'
        );
    } else {
        $instagram_icon = array(
            'link' => null
        );   
    }
    
    if( isset( $links['twitter'] ) && $links['twitter'] !== null ) {
        $twitter_icon = array(
            'link' => $links['twitter'],
            'icon' => '<svg width="100" height="100"  viewBox="0 0 32 32"><title>twitter icon</title><path d="M2 4 C6 8 10 12 15 11 A6 6 0 0 1 22 4 A6 6 0 0 1 26 6 A8 8 0 0 0 31 4 A8 8 0 0 1 28 8 A8 8 0 0 0 32 7 A8 8 0 0 1 28 11 A18 18 0 0 1 10 30 A18 18 0 0 1 0 27 A12 12 0 0 0 8 24 A8 8 0 0 1 3 20 A8 8 0 0 0 6 19.5 A8 8 0 0 1 0 12 A8 8 0 0 0 3 13 A8 8 0 0 1 2 4"></path></svg>'
        );
    } else {
        $twitter_icon = array(
            'link' => null
        );   
    }

    if( isset($links['tumblr']) && $links['tumblr'] !== null ) {
        $tumblr_icon = array(
            'link' => $links['tumblr'],
            'icon' => '<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 260 260" style="enable-background:new 0 0 260 260;" xml:space="preserve"><path d="M210.857,197.545c-1.616-0.872-3.584-0.787-5.119,0.223c-11.62,7.638-23.4,11.511-35.016,11.511c-6.242,0-11.605-1.394-16.416-4.275c-3.27-1.936-6.308-5.321-7.397-8.263c-1.057-2.797-1.045-10.327-1.029-20.748l0.005-63.543h52.795c2.762,0,5-2.239,5-5V62.802c0-2.761-2.238-5-5-5h-52.795V5c0-2.761-2.238-5-5-5h-35.566c-2.528,0-4.658,1.887-4.964,4.397c-1.486,12.229-4.258,22.383-8.247,30.196c-3.89,7.7-9.153,14.401-15.651,19.925c-5.206,4.44-14.118,8.736-26.49,12.769c-2.058,0.671-3.45,2.589-3.45,4.754v35.41c0,2.761,2.238,5,5,5h28.953v82.666c0,12.181,1.292,21.347,3.952,28.026c2.71,6.785,7.521,13.174,14.303,18.993c6.671,5.716,14.79,10.187,24.158,13.298c9.082,2.962,16.315,4.567,28.511,4.567c10.31,0,20.137-1.069,29.213-3.179c8.921-2.082,19.017-5.761,30.008-10.934c1.753-0.825,2.871-2.587,2.871-4.524v-39.417C213.484,200.108,212.476,198.418,210.857,197.545z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>'
        );
    } else {
        $tumblr_icon = array(
            'link' => null
        );   
    }
    
    if( isset( $links['linkedin'] ) && $links['linkedin'] !== null ) {
        $linkedin_icon = array(
            'link' => $links['linkedin'],
            'icon' => '<svg xmlns="http://www.w3.org/2000/svg" width="19.19" height="19.113" viewBox="0 0 19.19 19.113"><path d="M3.151,1A2.3,2.3,0,1,1,.84,3.293,2.3,2.3,0,0,1,3.151,1Z" transform="translate(-0.84 -1)" /><path d="M4.5,21.066H1.844a.634.634,0,0,1-.634-.634V8.9a.634.634,0,0,1,.634-.634H4.5a.634.634,0,0,1,.669.634V20.432a.634.634,0,0,1-.669.634Z" transform="translate(-0.889 -1.954)"/><path d="M21.027,12.344A4.344,4.344,0,0,0,16.683,8h-.695a3.866,3.866,0,0,0-3.179,1.659A3.571,3.571,0,0,0,12.6,10h0V8.53a.269.269,0,0,0-.269-.261H8.961A.269.269,0,0,0,8.7,8.53V20.761a.269.269,0,0,0,.261.269h3.475a.269.269,0,0,0,.261-.261V13.7a2.181,2.181,0,1,1,4.361,0V20.77a.269.269,0,0,0,.269.261H20.8a.261.261,0,0,0,.261-.261V12.344Z" transform="translate(-1.872 -1.919)" /></svg>'
        );
    } else {
        $linkedin_icon = array(
            'link' => null
        );   
    }
    
    if( isset( $links['pinterest'] ) && $links['pinterest'] !== null ) {
        $pinterest_icon = array(
            'link' => $links['pinterest'],
            'icon' => '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 144 144" enable-background="new 0 0 144 144" xml:space="preserve"><g><g><path fill="#BD081C" d="M71.9,5.4C35.1,5.4,5.3,35.2,5.3,72c0,28.2,17.5,52.3,42.3,62c-0.6-5.3-1.1-13.3,0.2-19.1c1.2-5.2,7.8-33.1,7.8-33.1s-2-4-2-9.9c0-9.3,5.4-16.2,12-16.2c5.7,0,8.4,4.3,8.4,9.4c0,5.7-3.6,14.3-5.5,22.2c-1.6,6.6,3.3,12,9.9,12c11.8,0,20.9-12.5,20.9-30.5c0-15.9-11.5-27.1-27.8-27.1c-18.9,0-30.1,14.2-30.1,28.9c0,5.7,2.2,11.9,5,15.2c0.5,0.7,0.6,1.2,0.5,1.9c-0.5,2.1-1.6,6.6-1.8,7.5c-0.3,1.2-1,1.5-2.2,0.9c-8.3-3.9-13.5-16-13.5-25.8c0-21,15.3-40.3,44-40.3c23.1,0,41,16.5,41,38.4c0,22.9-14.5,41.4-34.5,41.4c-6.7,0-13.1-3.5-15.3-7.6c0,0-3.3,12.7-4.1,15.8c-1.5,5.8-5.6,13-8.3,17.5c6.2,1.9,12.8,3,19.7,3c36.8,0,66.6-29.8,66.6-66.6C138.5,35.2,108.7,5.4,71.9,5.4z"/></g></g></svg>'
        );
    } else {
        $pinterest_icon = array(
            'link' => null
        );   
    }

    if( isset( $links['youtube'] ) && $links['youtube'] !== null ) {
        $youtube_icon = array(
            'link' => $links['youtube'],
            'icon' => '<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="553.102px" height="553.102px" viewBox="0 0 553.102 553.102" style="enable-background:new 0 0 553.102 553.102;" xml:space="preserve"><g><g><path d="M333.087,326.967c-8.641,0-16.805,4.799-24.485,14.4v-57.98h-24.125v177.529h24.125v-12.969c7.919,9.848,16.077,14.768,24.485,14.768c9.842,0,16.2-5.037,19.083-15.123c1.677-5.049,2.521-13.801,2.521-26.291v-52.576c0-12.719-0.845-21.604-2.521-26.641C349.287,331.998,342.929,326.967,333.087,326.967z M330.927,423.105c0,11.775-3.482,17.639-10.446,17.639c-4.082,0-8.042-1.916-11.879-5.752v-80.668c3.837-3.826,7.797-5.754,11.879-5.754c6.958,0,10.446,6.004,10.446,18.006V423.105z"/><path d="M409.422,326.967c-12.24,0-21.849,4.572-28.807,13.686c-4.804,6.469-7.203,16.811-7.203,30.961v46.463c0,14.162,2.521,24.473,7.564,30.961c6.958,9.131,16.683,13.684,29.168,13.684c12.724,0,22.325-4.797,28.807-14.406c2.883-4.32,4.682-9.113,5.404-14.406c0.477-3.348,0.716-8.525,0.716-15.49v-3.236h-24.486c0,2.643,0,5.219,0,7.734s-0.062,4.498-0.178,5.949c-0.122,1.432-0.177,2.277-0.177,2.516c-1.438,6.248-5.043,9.352-10.802,9.352c-8.165,0-12.24-6.121-12.24-18.354v-23.41h47.889v-27.361c0-13.912-2.521-24.236-7.559-30.963C431.032,331.539,421.668,326.967,409.422,326.967z M420.946,379.178h-23.765v-12.254c0-12.238,3.96-18.354,11.88-18.354c7.925,0,11.885,6.121,11.885,18.354V379.178z"/><path d="M239.818,429.588c-5.281,7.441-10.324,11.156-15.123,11.156c-3.366,0-5.165-1.799-5.397-5.404c-0.245-0.465-0.361-3.598-0.361-9.352v-97.223h-23.764v104.426c0,9.131,0.722,15.6,2.16,19.438c2.161,6.738,7.203,10.086,15.123,10.086c8.88,0,18.005-5.404,27.369-16.205v14.406h24.125v-132.15h-24.125v100.822H239.818z"/><path d="M271.153,193.013c7.681,0,11.524-6.132,11.524-18.372v-56.182c0-12.479-3.843-18.721-11.524-18.721c-7.687,0-11.524,6.242-11.524,18.721v56.182C259.629,186.88,263.466,193.013,271.153,193.013z"/><polygon points="108.03,308.596 136.115,308.596 136.115,460.916 162.762,460.916 162.762,308.596 191.568,308.596 191.568,283.387 108.03,283.387 		"/><path d="M449.398,0H103.71C75.142,0,50.717,10.153,30.429,30.422C10.141,50.723,0,75.142,0,103.709v345.683c0,28.566,10.141,52.998,30.429,73.268c20.282,20.281,44.707,30.441,73.281,30.441h345.688c28.562,0,52.986-10.154,73.274-30.441c20.281-20.27,30.429-44.701,30.429-73.268V103.709c0-28.568-10.147-52.987-30.429-73.287C502.385,10.153,477.96,0,449.398,0z M326.606,79.939h24.125v97.938c0,5.765,0.122,8.892,0.361,9.37c0.238,3.855,2.16,5.765,5.759,5.765c4.798,0,9.841-3.715,15.122-11.169V79.939h24.125v133.232h-24.125v-14.406c-9.847,10.802-19.088,16.206-27.729,16.206c-7.687,0-12.846-3.237-15.483-9.719c-1.438-4.32-2.16-10.918-2.16-19.804V79.939H326.606z M235.498,123.147c0-13.911,2.521-24.364,7.564-31.322c6.481-9.113,15.845-13.685,28.085-13.685c11.756,0,21.12,4.572,28.084,13.685c5.043,6.964,7.559,17.411,7.559,31.322v46.812c0,14.4-2.521,24.854-7.559,31.322c-6.965,9.131-16.328,13.685-28.084,13.685c-12.24,0-21.604-4.56-28.085-13.685c-5.043-6.946-7.564-17.387-7.564-31.322V123.147z M170.687,34.211l19.088,70.215l18.36-70.215h27.008l-32.406,106.592v72.369h-26.646v-72.369c-2.644-13.207-8.164-32.167-16.566-56.897c-1.683-5.514-4.45-13.801-8.287-24.853c-3.843-11.028-6.726-19.315-8.642-24.841H170.687z M467.403,468.834c-2.405,10.338-7.51,19.09-15.307,26.293c-7.803,7.203-16.866,11.406-27.185,12.6c-32.89,3.6-82.345,5.404-148.355,5.404c-66.023,0-115.472-1.799-148.355-5.404c-10.325-1.193-19.388-5.402-27.185-12.6c-7.803-7.203-12.907-15.949-15.3-26.293c-4.804-20.158-7.203-51.371-7.203-93.623c0-41.523,2.399-72.736,7.203-93.623c2.399-10.551,7.503-19.37,15.3-26.458c7.797-7.087,16.983-11.224,27.546-12.436c32.644-3.599,81.978-5.404,148-5.404c66.255,0,115.705,1.799,148.355,5.404c10.324,1.212,19.449,5.343,27.368,12.436c7.926,7.087,13.085,15.906,15.484,26.458c4.559,19.932,6.842,51.133,6.842,93.623C474.601,417.463,472.201,448.676,467.403,468.834z"/></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>'
        );
    } else {
        $youtube_icon = array(
            'link' => null
        );   
    }

    if( isset( $links['tiktok'] ) && $links['tiktok'] !== null ) {
        $tiktok_icon = array(
            'link' => $links['tiktok'],
            'icon' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2859 3333" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd"><path d="M2081 0c55 473 319 755 778 785v532c-266 26-499-61-770-225v995c0 1264-1378 1659-1932 753-356-583-138-1606 1004-1647v561c-87 14-180 36-265 65-254 86-398 247-358 531 77 544 1075 705 992-358V1h551z"/></svg>'
        );
    } else {
        $tiktok_icon = array(
            'link' => null
        );   
    }

    if( isset( $links['telegram'] ) && $links['telegram'] !== null ) {
        $telegram_icon = array(
            'link' => $links['telegram'],
            'icon' => '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><path id="telegram-1" d="M18.384,22.779c0.322,0.228 0.737,0.285 1.107,0.145c0.37,-0.141 0.642,-0.457 0.724,-0.84c0.869,-4.084 2.977,-14.421 3.768,-18.136c0.06,-0.28 -0.04,-0.571 -0.26,-0.758c-0.22,-0.187 -0.525,-0.241 -0.797,-0.14c-4.193,1.552 -17.106,6.397 -22.384,8.35c-0.335,0.124 -0.553,0.446 -0.542,0.799c0.012,0.354 0.25,0.661 0.593,0.764c2.367,0.708 5.474,1.693 5.474,1.693c0,0 1.452,4.385 2.209,6.615c0.095,0.28 0.314,0.5 0.603,0.576c0.288,0.075 0.596,-0.004 0.811,-0.207c1.216,-1.148 3.096,-2.923 3.096,-2.923c0,0 3.572,2.619 5.598,4.062Zm-11.01,-8.677l1.679,5.538l0.373,-3.507c0,0 6.487,-5.851 10.185,-9.186c0.108,-0.098 0.123,-0.262 0.033,-0.377c-0.089,-0.115 -0.253,-0.142 -0.376,-0.064c-4.286,2.737 -11.894,7.596 -11.894,7.596Z"/></svg>'
        );
    } else {
        $telegram_icon = array(
            'link' => null
        );   
    }

    if( isset(  $links['whatsapp'] ) && $links['whatsapp'] !== null ) {
        $whatsapp_icon = array(
            'link' => $links['whatsapp'],
            'icon' => '<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280.000000 720.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,720.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"><path d="M6255 6844 c-540 -35 -1107 -229 -1555 -532 -473 -320 -848 -752 -1091 -1256 -133 -276 -216 -536 -273 -856 -43 -240 -52 -602 -22 -880 40 -374 177 -822 362 -1188 l53 -103 -123 -367 c-68 -202 -191 -570 -274 -818 -84 -249 -152 -459 -152 -469 0 -9 13 -22 29 -28 26 -10 29 -14 24 -45 -6 -32 -5 -34 18 -27 41 13 936 298 1314 420 198 63 368 115 378 115 9 0 52 -17 95 -39 366 -184 756 -294 1171 -332 164 -14 498 -7 659 16 954 132 1766 659 2266 1468 163 264 318 632 401 952 79 307 117 688 96 982 -54 781 -356 1473 -881 2017 -509 527 -1157 853 -1895 952 -108 14 -482 26 -600 18z m391 -684 c357 -29 650 -108 959 -259 419 -206 770 -514 1030 -906 200 -301 323 -625 371 -979 23 -168 23 -508 0 -680 -163 -1209 -1161 -2141 -2372 -2217 -427 -26 -824 44 -1212 214 -107 47 -284 143 -339 183 -17 13 -39 24 -49 24 -9 0 -222 -65 -472 -145 -250 -80 -456 -145 -457 -143 -2 2 62 197 141 433 79 237 144 442 144 458 0 16 -18 53 -44 90 -418 599 -554 1426 -351 2127 45 152 82 245 155 390 200 391 505 732 880 982 473 316 1064 472 1616 428z"/><path d="M5323 5236 c-23 -7 -56 -23 -75 -34 -51 -32 -199 -190 -245 -262 -147 -229 -180 -534 -92 -832 67 -225 149 -397 299 -629 190 -292 313 -450 510 -653 296 -305 545 -476 927 -635 282 -118 490 -185 607 -197 81 -8 258 20 362 58 144 52 309 168 373 262 64 96 130 313 138 457 l6 95 -31 36 c-22 24 -112 78 -294 176 -432 232 -487 254 -555 218 -17 -8 -81 -73 -141 -143 -178 -207 -215 -243 -245 -243 -38 0 -287 127 -403 205 -135 92 -223 166 -334 281 -132 137 -275 333 -355 486 l-18 36 72 79 c95 101 134 162 172 268 39 108 37 141 -20 290 -51 133 -92 243 -163 434 -58 157 -101 221 -161 240 -57 17 -287 22 -334 7z"/></g></svg>'
        );
    } else {
        $whatsapp_icon = array(
            'link' => null
        );   
    }

    // Create array whith RRSS data
    $rrss = [];
    array_push( $rrss, $facebook_icon, $instagram_icon, $twitter_icon, $tumblr_icon, $linkedin_icon, $pinterest_icon, $youtube_icon, $tiktok_icon, $telegram_icon, $whatsapp_icon );
    
    // Create array with html markup for print data
    $rrss_list = '';
    $rrss_list .= '<ul id="' . $shortcode_atts['id'] . '" class="social-links">';
    foreach ($rrss as $rrss_link) {
        if(isset($rrss_link['link'])& $rrss_link !== null ){
            $rrss_list.='<li><a rel="nofollow" href="'.$rrss_link['link'].'" target="_blank">' . $rrss_link['icon'] . '</a></li>';
        }
    }
    $rrss_list .= '</ul>';

    return $rrss_list;
}
add_shortcode( 'rrss-links', 'dfr_rrss_do_icons' );

// Add minimum CSS Rules to WP Head

function dfr_rrss_option_css(){

    Global $links;

    if( isset($links['icon_color']) && $links['icon_color'] !== '' ){
        $main_color = $links['icon_color'];    
    } else {
        $main_color = '#000000';
    }

    if( isset($links['icon_color_hover']) && $links['icon_color_hover'] !== '' ){
        $hover_color = $links['icon_color_hover'];
    } else {
        $hover_color = '#8100c6';
    }

    $size_icon = $links['icon_size'];

    $margin_icon = $links['icon_margin'];
    
    ?>
    <style type="text/css" id="dfr-rrss-css">
        ul.social-links li{
            margin-right: <?php echo $margin_icon ?>px;
        }
        ul.social-links li a svg{
            width: <?php echo $size_icon ?>px;
            height: <?php echo $size_icon ?>px;
        }
        ul.social-links li a svg path, 
        ul.social-links li a svg circle, 
        ul.social-links li a svg polygon{
            fill: <?php echo $main_color ?>;
        }
        ul.social-links li a:hover svg path,
        ul.social-links li a:hover svg circle,
        ul.social-links li a:hover svg polygon{
            fill: <?php echo $hover_color ?>;
        }
    </style>
    <?php
    
}
add_action( 'wp_head', 'dfr_rrss_option_css' );
